$(document).ready(function(){var i,a,s=$(".home__moreButton"),e=$(".button_to"),o=$(".button_menu"),n=function(){t(),r(),e.css("visibility","visible"),$(".home").addClass("visible"),c(),d(),u(),l()},t=function(){a={skills:$(".skills").offset().top,portfolio:$(".portfolio").offset().top,history:$(".history").offset().top,contacts:$(".contacts").offset().top}},l=function(){$(".home").waitForImages(function(){})},c=function(){$("input, textarea").focus(function(i){$(i.target).removeClass("input_error")}),$(".menu__item").click(function(a){var s=$(a.target).attr("href");$.magnificPopup.close(),i=!0,"home"==s&&e.hide(),$(s).ScrollTo({duration:300,easing:"linear",callback:function(){"home"!=s&&e.show(),i=!1}}),a.stopPropagation()}),s.click(function(){$(".skills").ScrollTo({duration:300,easing:"linear"})}),e.click(function(){var s;if(e.data("up"))i=!0,e.hide(),$("#home").ScrollTo({duration:300,easing:"linear",callback:function(){i=!1}});else{s=e.offset().top;for(var o in a)if(s<=a[o]){"contacts"!=o&&setTimeout(function(){m(e)},100),$("."+o).ScrollTo({duration:300,easing:"linear"});break}$("."+o).ScrollTo({duration:300,easing:"linear"})}}),$(".contants__sendMessage").click(function(){p()}),$(".contacts__writeAgain").click(function(){var i=$(".contacts__formWrap");$(".contacts__successEmailMessage").css("visibility","hidden").removeClass("visible"),$(".contacts__successEmailMessageText").removeClass("visible"),i.css("height","auto"),i.children().show(),i.addClass("visible")}),$(document).on("scroll",function(i){r()}),$(window).on("resize",function(i){f(),t()})},r=function(){var s=$(document).scrollTop(),o=s+$(window).height();i||(s<a.skills?e.hide():e.show());var n=$(".contacts__socialLink"),t=$(".contacts__formWrap");if(o>=t.offset().top-100&&!n[0].visible){n[0].visible=!0,n.css("opacity",0);var l=function(i){i>=0&&setTimeout(function(){m($(n[i]),"animated bounceInLeft"),$(n[i]).css("opacity",1),l(i-1)},i<n.length-1?100:0),0==i&&setTimeout(function(){t.addClass("visible")},500)};l(n.length-1)}o<n.offset().top&&(n[0].visible=!1,n.css("opacity",0),t.removeClass("visible")),o==$(document).height()?(e.data("up","1"),e.find(".fa").removeClass("fa-arrow-down").addClass("fa-arrow-up"),m(e,"animated-roll-fast")):e.data("up")&&(e.data("up",""),e.find(".fa").removeClass("fa-arrow-up").addClass("fa-arrow-down"),m(e,"animated-roll"))},d=function(){$(".open-popup-link").magnificPopup({type:"inline",midClick:!0,mainClass:"mfp-project",removalDelay:300,callbacks:{beforeOpen:function(){e.hide(),o.hide()},open:function(){this.slider=$(".projectPopup__screens",this.content).bxSlider({mode:"fade"}),e.show().css("opacity",0),o.show().css("opacity",0)},afterClose:function(){this.slider.destroySlider(),e.css("opacity",1),o.css("opacity",1)}}})},f=function(){var i=$(window).width();o.css("left",i-(i>1e3?94:70)+"px").css("visibility","visible")},u=function(){var i=!1,a=!1;f(),o.magnificPopup({type:"inline",midClick:!0,mainClass:"mfp-menu",removalDelay:200,showCloseBtn:!1,callbacks:{beforeOpen:function(){e.hide(),m(o,"animated-roll"),o.find(".fa").removeClass("fa-bars").addClass("fa-times"),o.addClass("button_menuClose")},open:function(){i=!0,a=!0,e.show().css("opacity",0)},beforeClose:function(){m(o,"animated-roll"),o.removeClass("button_menuClose"),o.find(".fa").removeClass("fa-times").addClass("fa-bars")},afterClose:function(){a=!1,e.css("opacity",1)}}}),o.click(function(){a&&(i?i=!1:$.magnificPopup.close())})},m=function(i,a,s){a=a||"animated bounce",i.addClass(a),i.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){i.removeClass(a),s&&s(i)})},p=function(){var i,a=$(".contacts__formWrap"),s=$(".contacts__form"),e=s.find('input[name="name"]'),o=s.find('input[name="email"]'),n=s.find('textarea[name="message"]');e.val()&&o.val()&&n.val()?(i=e.val()+" - "+o.val()+" - "+n.val(),e.attr("disabled","true"),o.attr("disabled","true"),n.attr("disabled","true"),$.ajax({url:"mail.php",type:"POST",data:{message:i},success:function(){a.height(a.height()),a.children().hide(),a.removeClass("visible"),$(".contacts__successEmailMessage").css("visibility","visible").addClass("visible").one("webkitTransitionEnd mozTransitionEnd MSTransitionEnd otransitionend transitionend",function(){$(".contacts__successEmailMessageText").addClass("visible")}),e.removeAttr("disabled"),o.removeAttr("disabled"),n.removeAttr("disabled"),e.val(""),o.val(""),n.val("")}})):(e.val()||e.addClass("input_error"),o.val()||o.addClass("input_error"),n.val()||n.addClass("input_error"))};n()});